<!DOCTYPE HTML>
<html>
<head>
	<title>TradingView Binance Charts</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">

	<!-- TradingView charting library -->
	<script type="text/javascript" src="charting_library/charting_library.standalone.js"></script>
	<script type="text/javascript" src="datafeeds/binance-datafeed.js"></script>

	<!-- Добавляем стили для контейнера графика -->
	<style>
		#tv_chart_container {
			width: 100%;
			height: 600px;
		}
	</style>

	<script type="text/javascript">
		function initOnReady(symbol = 'BTCUSDT') {
			var widget = window.tvWidget = new TradingView.widget({
				fullscreen: true,
				symbol: symbol,
				interval: '15',
				container: "tv_chart_container",

				// Указываем бинанс-фид
				datafeed: new BinanceDatafeed(),
				library_path: "charting_library/",
				locale: "en",
				disabled_features: ["use_localstorage_for_settings"],
				enabled_features: ["study_templates"],
				charts_storage_url: 'https://saveload.tradingview.com',
				charts_storage_api_version: "1.1",
				client_id: 'tradingview.com',
				user_id: 'public_user_id',
				theme: "light",
			});
		}

		window.addEventListener('DOMContentLoaded', () => {
			// Инициализируем график с дефолтным символом
			initOnReady('BTCUSDT');

			// Обрабатываем переключение символов
			document.getElementById('symbol_selector').addEventListener('change', (event) => {
				const selectedSymbol = event.target.value;
				tvWidget.setSymbol(selectedSymbol, '15');
			});
		});
	</script>

</head>

<body style="margin:0px;">
	<!-- Контейнер для графика -->
	<div id="tv_chart_container"></div>

	<!-- Выпадающий список для выбора символа -->
	<select id="symbol_selector">
		<!-- Этот список можно динамически заполнять с помощью API -->
		<option value="BTCUSDT">BTC/USDT</option>
		<option value="ETHUSDT">ETH/USDT</option>
		<option value="BNBUSDT">BNB/USDT</option>
		<!-- Здесь могут быть добавлены другие символы -->
	</select>
</body>
</html>
